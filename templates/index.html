{% extends "layout.html" %}

{% block title %}
index
{%endblock %}

{% block body %}

<nav class="navbar navbar-expand-lg border-bottom">
    <div class="container-fluid">
        <strong>
            <a class="navbar-brand" href="#">Expense Tracker</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </strong>
        <div class="collapse navbar-collapse justify-content-between" id="navbarNav">
            <ul class="navbar-nav">
            </ul>
            <div><strong>
                    Welcome {{activeUser.capitalize()}}
                </strong>
            </div>
        </div>
    </div>
</nav>

<section id="title">
    <div class="container align-items-center text-center justify-content-center">
        <div class="p-5">
            <h1>
                <strong>
                    Expense Tracker
                </strong>
            </h1>
        </div>
        <form action="/" method="POST" enctype="multipart/form-data">
            <section class="img-inp">
                <div class="input-group mb-3">
                    <input type="file" class="form-control" id="img" name="img" multiple>
                    <button type="submit" class="btn btn-primary" id="submitBtn" value="Upload">Upload</button>
                </div>
                {% for i in dataURI%}
                <img src='data:image/jpeg;base64,{{i}}' alt="" height="300px"  width="300px">
                {% endfor%}
            </section>
        </form>
        <form action="/" method="POST" enctype="multipart/form-data">
            <section class="container m-3">
                <div class="input-group mb-3 justify-content-end">
                    <button class="btn btn-secondary" class="nav-link" id="pdf" value="pdf">Export PDF</button>
                </div>
            </section>
        </form>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Invoice Id</th>
                    <th scope="col">Seller</th>
                    <th scope="col">CGST</th>
                    <th scope="col">SGST</th>
                    <th scope="col">Amount</th>
                    <th scope="col">Date</th>
                    <th scope="col">Category</th>
                </tr>
            </thead>
            <tbody>
                {% if data_display %}
                {% for i in data_display %}
                <tr>
                    <td>{{i['invoice_no']}}</td>
                    <td>{{i['name of seller']}}</td>
                    <td>{{i['cgst_amount']}}</td>
                    <td>{{i['sgst_amount']}}</td>
                    <td>{{i['bill_amount']}}</td>
                    <td>{{i['date']}}</td>
                    <td>{{i['category of expense from']}}</td>
                </tr>
                {% endfor %}
                {% endif%}
                <tr>
                    <td class="bg-body-secondary"><strong>Total:</strong></td>
                    <td class="bg-body-secondary"></td>
                    <td class="bg-body-secondary">
                        <strong>
                            {{cgstSum}}
                        </strong>
                    </td>
                    <td class="bg-body-secondary">
                        <strong>
                            {{sgstSum}}
                        </strong>
                    </td>
                    <td class="bg-body-secondary">
                        <strong>
                            {{totalExp}}
                        </strong>
                    </td>
                    <td class="bg-body-secondary"></td>
                    <td class="bg-body-secondary"></td>
                </tr>
            </tbody>
        </table>
    </div>
</section>


{% endblock %}